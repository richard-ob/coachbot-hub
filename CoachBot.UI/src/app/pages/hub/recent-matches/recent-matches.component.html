<div class="container" [class.py-4]="verticalPadding">
    <!-- Team Latest Results -->
    <app-spinner *ngIf="!matches"></app-spinner>
    <div *ngIf="matches && !matches.length && !hasFiltersApplied" class="alert alert-info">
        No matches played yet. Come back soon!
    </div>
    <div *ngIf="(matches && matches.length) || hasFiltersApplied" class="card card--has-table">
        <div class="card__header card__header--has-btn">
            <h4>{{includeUpcoming ? 'Matches' : 'Results' }}</h4>
            <ul *ngIf="showFilters" class="team-result-filter d-none d-lg-inline float-right">
                <li class="team-result-filter__item">
                    <mat-datepicker #dateFromPicker></mat-datepicker>
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend clickable">
                            <span class="input-group-text" id="basic-addon1" (click)="dateFromPicker.open()">
                                <i class="fas fa-calendar"></i>
                            </span>
                        </div>
                        <input matInput class="form-control input-xs" [matDatepicker]="dateFromPicker"
                            [(ngModel)]="filters.dateFrom" placeholder="Date From" (click)="dateFromPicker.open()">
                    </div>
                </li>
                <li class="team-result-filter__item">
                    <mat-datepicker #dateToPicker></mat-datepicker>
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend clickable">
                            <span class="input-group-text" id="basic-addon1" (click)="dateToPicker.open()">
                                <i class="fas fa-calendar"></i>
                            </span>
                        </div>
                        <input matInput class="form-control input-xs" [matDatepicker]="dateToPicker"
                            [(ngModel)]="filters.dateTo" placeholder="Date To" (click)="dateToPicker.open()">
                    </div>
                </li>
                <li class="team-result-filter__item">
                    <select class="form-control" [(ngModel)]="filters.matchType">
                        <option [ngValue]="undefined">All</option>
                        <option [ngValue]="matchTypes.RankedFriendly">Friendlies</option>
                        <option [ngValue]="matchTypes.Competition">Competitive</option>
                    </select>
                </li>
                <li class="team-result-filter__item">
                    <button type="button" class="btn btn-secondary btn-xs card-header__button" (click)="setFilters()"
                        title="Filter results">
                        Filter
                    </button>
                </li>
            </ul>
        </div>
        <div class="card__content table-responsive">
            <div *ngIf="matches && !matches.length" class="alert alert-info m-4">
                No matches found meeting the given criteria. Sorry!
            </div>
            <table *ngIf="matches && matches.length" class="table table-striped table-hover table-clickable"
                [class.widget__content--loading]="isLoadingPage">
                <thead>
                    <tr>
                        <th class="team-result__date">Date</th>
                        <th *ngIf="teamId"></th>
                        <th></th>
                        <th class="team-result__vs text-left" colspan="2">Match</th>
                        <th class="team-result__status">Match Type</th>
                        <th class="team-result__status text-center">Match Format</th>
                        <th class="team-result__ball-posession text-center">Location</th>
                        <th class="team-result__game-overview text-center">Match Overview</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let match of matches | paginate: { itemsPerPage: 10, currentPage: currentPage, totalItems: totalItems }"
                        (click)="navigateToMatchOverview(match.id)">
                        <td class="team-result__date text-nowrap">
                            {{(match.kickOff)| date:'medium'}}
                        </td>
                        <td *ngIf="teamId">
                            <app-form-indicator [form]="[getMatchOutcomeForTeam(match)]"></app-form-indicator>
                        </td>
                        <td class="text-right text-nowrap">
                            <app-team-name [team]="match.teamHome" [isHomeTeam]="true">
                            </app-team-name>
                        </td>
                        <td class="text-center text-nowrap px-0">
                            <span *ngIf="match.matchStatistics; else matchNotPlayed">
                                <span class="team-result--score">{{match?.matchStatistics?.matchGoalsHome}}</span>
                            <span class="team-result--score">{{match?.matchStatistics?.matchGoalsAway}}</span>
                            </span>
                            <ng-template #matchNotPlayed>
                                <span class="team-result--score-tbc">
                                    TBC
                                </span>
                            </ng-template>
                        </td>
                        <td class="text-left text-nowrap">
                            <app-team-name [team]="match.teamAway" [isHomeTeam]="false">
                            </app-team-name>
                        </td>
                        <td class="team-result__status text-nowrap">
                            <ng-container [ngSwitch]="match.matchType">
                                <span *ngSwitchCase="matchTypes.UnrankedFriendly">Unranked Friendly</span>
                                <span *ngSwitchCase="matchTypes.RankedFriendly">Ranked Friendly</span>
                                <span *ngSwitchCase="matchTypes.Competition">
                                    <a [routerLink]="['/tournament/', match.tournamentId]">{{match.tournament.name}}</a>
                                </span>
                            </ng-container>
                        </td>
                        <td class="team-result__status text-center">{{match.format}}v{{match.format}}</td>
                        <td class="team-result__ball-posession text-center">
                            <img *ngIf="match.server && match.server.country"
                                src="https://www.countryflags.io/{{match.server.country.code}}/flat/24.png"
                                title="{{match.server.country.name}}">
                        </td>
                        <td class="team-result__game-overview text-center">
                            <a *ngIf="match.matchStatistics" [routerLink]="['/match-overview', match.id]"
                                class="btn btn-xs btn-primary">Match
                                Overview</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div *ngIf="totalPages > 1" class="text-center">
        <pagination-controls (pageChange)="loadPage($event)"></pagination-controls>
    </div>
</div>
<!-- Team Latest Results / End -->