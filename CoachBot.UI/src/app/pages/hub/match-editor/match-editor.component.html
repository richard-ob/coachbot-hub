<div class="container py-4">
    <div class="card">
        <div class="card__header">
            <h4>Match Editor</h4>
        </div>
        <div class="card__content">
            <ng-container *ngIf="!isLoading; else spinner">
                <div class="form-group">
                    <label>Home Team</label>
                    <select [(ngModel)]="match.teamHomeId" name="teamHome" class="form-control">
                        <option *ngFor="let team of teams" [ngValue]="team.id">{{team.name}} ({{team.teamCode}})
                        </option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Away Team</label>
                    <select [(ngModel)]="match.teamAwayId" name="teamHome" class="form-control">
                        <option *ngFor="let team of teams" [ngValue]="team.id">{{team.name}} ({{team.teamCode}})
                        </option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Scheduled Kick Off</label>
                    <div class="form-control-static mb-2">
                        {{match.kickOff | date:'full'}}
                        <button type="button" class="btn btn-primary btn-xs ml-2"
                            (click)="showDatepicker = !showDatepicker">
                            Edit
                        </button>
                    </div>
                    <div *ngIf="showDatepicker" class="border rounded px-4 pt-4  col-md-6">
                        <dl-date-time-picker startView="day" maxView="year" minView="minute" minuteStep="1"
                            [(ngModel)]="match.kickOff">
                        </dl-date-time-picker>
                    </div>
                </div>

                <div class="form-group">
                    <label>Server</label>
                    <select [(ngModel)]="match.serverId" name="server" class="form-control">
                        <option *ngFor="let server of servers" [ngValue]="server.id">{{server.name}}</option>
                    </select>
                </div>

                <button class="btn btn-primary" (click)="updateMatch()" type="button">Save</button>
            </ng-container>
            <ng-template #spinner>
                <app-spinner></app-spinner>
            </ng-template>
        </div>
    </div>

    <app-match-data-uploader *ngIf="match" [matchId]="match.id"></app-match-data-uploader>

    <div class="card">
        <div class="card__header">
            <h4>Match Result Override</h4>
        </div>
        <div class="card__content">
            <ng-container *ngIf="!isLoading; else spinner">
                <p class="text-muted">
                    This will override any submitted result, as well as acting as a substitute for where match data is
                    not available
                </p>
                <div class="form-group">
                    <label>Home Goals</label>
                    <input class="form-control" type="number" name="homeGoalsOverride"
                        [(ngModel)]="match.matchStatistics.homeGoals">
                </div>
                <div class="form-group">
                    <label>Away Goals</label>
                    <input class="form-control" type="number" name="homeGoalsOverride"
                        [(ngModel)]="match.matchStatistics.awayGoals">
                </div>
                <button class="btn btn-primary" (click)="submitMatchResultOverride()" type="button">Save</button>
            </ng-container>
            <ng-template #spinner>
                <app-spinner></app-spinner>
            </ng-template>
        </div>
    </div>
</div>